<section>
    <div class="columns is-centered is-multiline">
        <!-- button links-->
        <div class="column">
            <div class="leaderboard-links columns is-mobile">
                <div class="column is-half">
                    <button id="userProfile" class="leaderboard-button button is-large">my profile</button>
                </div>
                <div class="column is-half">
                    <button id="logoutButton" class="leaderboard-button button is-large">logout</button>
                </div>
            </div>
        </div>
        <!-- page logo, header, & subheader -->
        <div class="column is-full">
            <h1 class="page-header-title-logo"><span class="page-title-best"><i class="app-logo fas fa-calculator"></i>
                    BEST</span><span class="page-title-imator">imator</span></h1>
            <p class="main-page-subheading">are you the <span class="subheading-accent">best</span> at <span
                    class="subheading-accent">estimating</span>?</p>
        </div>
        <!-- page title -->
        <div class="column is-full">
            <h1 class="leaderboard-header">leaderboard</h1>
        </div>
        <!-- leaderboard items -->
        <ul id="leaderboardList" class="leaderboard-list">
            <!--<li class="leaderboard-list-item"><span class="player-info">rank | username | score</span></li>-->
        </ul>
    </div>
</section>
<script>

    $(document).ready(function () {

        $.get("/api/users/", function (data) {
            let userIdList = data.map(user => user.id);
            userIdList.forEach(user => getEachScore(user));
        });

        function getEachScore(user) {
            $.get("/api/answers/averageScore/" + user, function (data) {
                let totalScore = 0;
                data.forEach(score => (totalScore += score.answer_score));
                let averageScore = totalScore / data.length;
                renderScore(data[0].UserId, averageScore);
            });
        };

        function renderScore(id, score) {
            $.get("/api/users/" + id, function (data) {
                let userName = data[0].username;
                $(`<li>${userName} | ${Math.floor(score)}%</li>`).addClass("leaderboard-list-item").appendTo("#leaderboardList")
            })
        }

    });

    /*// leaderboard "/leaderboard" script here

    // button to go to player's profile page
    $("#userProfile").on("click", function (event) {
        event.preventDefault();
        window.location.href = "/player";
    });
    //button to log out
    $("#logoutButton").on("click", function (event) {
        event.preventDefault();
        window.location.href = "/auth/logout";
    });*/
</script>